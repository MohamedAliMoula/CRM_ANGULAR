
   
    <!--end::Container-->
    <div *ngIf="loading" mat-dialog-content class="modal-body scroll-y px-10 px-lg-15 pt-0 pb-15">
        <div id="kt_content_container" class="container-xxl" id="htmlData">
            <!-- begin::Invoice 3-->
            <div class="card">
                <!-- begin::Body-->
                <div class="card-body py-20">
                    <!-- begin::Wrapper-->
                    <div class="mw-lg-950px mx-auto w-100">
                
                        <!--begin::Body-->
                        <div class="pb-12">
                            <!--begin::Wrapper-->
                            <div class="d-flex flex-column gap-7 gap-md-10">
                                
                                <!--begin::Order details-->
                                <div class="d-flex flex-column flex-sm-row gap-7 gap-md-10 fw-bolder">
                                    <div class="flex-root d-flex flex-column">
                                        <span class="text-muted">Order ID</span>
                                        <span class="fs-5">#{{dev?.devId}}</span>
                                    </div>
                                    <div class="flex-root d-flex flex-column">
                                        <span class="text-muted">Date</span>
                                        <span class="fs-5">{{dev?.DEVDT |date}}</span>
                                    </div>
                                    <div class="flex-root d-flex flex-column">
                                        <span class="text-muted">Client</span>
                                        <span class="fs-5">{{dev?.NOM}}</span>
                                    </div>
                                    
                                </div>
                                <!--end::Order details-->
                                <!--begin::Billing & shipping-->
                                <div class="d-flex flex-column flex-sm-row gap-7 gap-md-10 fw-bolder">
                                    <div class="flex-root d-flex flex-column">
                                        <span class="text-muted">Client Address</span>
                                        <span class="fs-6">{{client?.PAY}}
                                        <br />{{client?.VIL}},
                                        <br />{{client?.CPOSTAL}},
                                        <br />{{client?.TEL}}.</span>
                                    </div>
                                   
                                </div>
                                <div class="d-flex flex-column gap-7 gap-md-10">
                                    <form [formGroup]="aricleform">
                                      <div style="display: flex;
                                      justify-items: center;
                                      justify-content: space-between;
                                      ">
                                        <div class=" fv-row" style="margin-right: 5px;">
                                          <mat-form-field style="    width: 400px;">
                                            <input   type="text" placeholder="Article" matInput [formControl]="Control" [matAutocomplete]="auto1">
                                            <mat-autocomplete #auto1="matAutocomplete" [displayWith]="dispaly">
                                              <mat-option *ngFor="let opt of filteredArt | async" [value]="opt">
                                                {{opt.DES}}
                                              </mat-option>
                                            </mat-autocomplete>
                                          </mat-form-field>
                                        </div>
                                        <div class="fv-row" style="margin-right: 5px;">
                                          <a class="form-control form-control-lg form-control-solid">
                                            {{Control.value?.PRIX }}DT
                              
                                          </a>
                                        </div>
                                        <div class="fv-row" style="margin-right: 5px;">
                                          <input
                                            type="number"
                                            class="form-control form-control-lg form-control-solid"
                                            placeholder="QuantitÃ©"
                                            formControlName="qte"
                              
                                          />
                                        </div>
                                        <div class=" fv-row" style="margin-right: 5px;">
                                          <input
                                            type="number"
                                            class="form-control form-control-lg form-control-solid"
                                            placeholder="Remise"
                                            formControlName="remise"
                              
                                          />
                                        </div>
                                        <div class="fv-row" style="display: flex;" >
                                          <button
                                            type="button"
                                            style="margin-right:2rem ;"
                                            class="btn btn-primary"
                                            (click)=" reset()"
                                          >
                                            Annuler
                                          </button>
                                          <button
                                            type="button"
                                            class="btn btn-primary"
                                            (click)="addItem()"
                                          >
                                           Ajouter
                                          </button>
                                        </div>
                                      </div>
                                    </form>
                                </div>
                                <div class="d-flex justify-content-between flex-column">
                                    <!--begin::Table-->
                                    <div class="table-responsive border-bottom mb-9">
                                        <table class="table align-middle table-row-dashed fs-6 gy-5 mb-0">
                                            <thead>
                                                <tr class="border-bottom fs-6 fw-bolder text-muted">
                                                    <th class="max-w-175px pb-2">Article</th>
                                                    <th class="max-w-70px pb-2">Prix</th>
                                                    <th class="max-w-70px  pb-2">Quantite</th>
                                                    <th class="max-w-70px  pb-2">Remise</th>
                                                    <th class="max-w-70px pb-2">Prix avec Remise</th>

                                                    <th class="max-w-100px text-end pb-2"></th>
                                                </tr>
                                            </thead>
                                            <tbody class="fw-bold text-gray-600">
                                                <!--begin::Products-->
                                                <tr *ngFor="let item of ar">
                                                    <!--begin::Product-->
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            
                                                             <div class="fw-bolder">{{item.Article}}</div>
                                                        
                                                        </div>
                                                    </td>
                                                    <!--end::Product-->
                                                    <!--begin::SKU-->
                                                    <td class="text-end">{{item.Prix}}</td>
                                                    <!--end::SKU-->
                                                    <!--begin::Quantity-->
                                                    <td >
                                                      {{item.Quantite}}
                                                    </td>
                                                    <!--end::Quantity-->
                                                    <!--begin::Total-->
                                                    <td >
                                                     
                                                      {{item.Remise}}
                                                    </td>
                                                    <td >{{item.PrixAR}}</td>

                                                    <td >
                                                        <a
                                                        (click)="deleteArticle(item.devArt)"
                                                        class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm">
                                                            <!--begin::Svg Icon | path: icons/duotune/general/gen027.svg-->
                                                            <span class="svg-icon svg-icon-3">
                                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                <path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black" />
                                                                <path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black" />
                                                                <path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black" />
                                                              </svg>
                                                            </span>
                                                            <!--end::Svg Icon-->
                                                          </a>
                                                    </td>
                                                    <!--end::Total-->
                                                </tr>
                                                <tr *ngFor="let new of newart">
                                                    <!--begin::Product-->
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            
                                                             <div class="fw-bolder">{{new.Article}}</div>
                                                        
                                                        </div>
                                                    </td>
                                                    <!--end::Product-->
                                                    <!--begin::SKU-->
                                                    <td class="text-end">{{new.Prix}}</td>
                                                    <!--end::SKU-->
                                                    <!--begin::Quantity-->
                                                    <td >
                                                      {{new.Quantite}}
                                                    </td>
                                                    <!--end::Quantity-->
                                                    <!--begin::Total-->
                                                    <td >
                                                     
                                                      {{new.Remise}}
                                                    </td>
                                                    <td >{{(new.Prix-(new.Prix*new.Remise/100))*new.Quantite }}</td>

                                                    <td >
                                                        <a
                                                        (click)="removenew(new)"
                                                        class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm">
                                                            <!--begin::Svg Icon | path: icons/duotune/general/gen027.svg-->
                                                            <span class="svg-icon svg-icon-3">
                                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                <path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black" />
                                                                <path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black" />
                                                                <path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black" />
                                                              </svg>
                                                            </span>
                                                            <!--end::Svg Icon-->
                                                          </a>
                                                    </td>
                                                    <!--end::Total-->
                                                </tr>
                                                
                                                <tr>
                                                    <td colspan="3" class="fs-3 text-dark fw-bolder text-end">Total</td>
                                                    <td class="text-dark fs-3 fw-boldest text-end">{{(getTotal()+total).toFixed(2)}}DT</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!--end::Table-->
                                </div>
                                <!--end:Order summary-->
                            </div>
                            <!--end::Wrapper-->
                        </div>
                        <!--end::Body-->
                        <!-- begin::Footer-->
                       
                        <!-- end::Footer-->
                    </div>
                    <!-- end::Wrapper-->
                </div>
                <!-- end::Body-->
            </div>
            <!-- end::Invoice 1-->
        </div>
        
    </div>
    <div mat-dialog-action [align]="'end'" class="card-footer d-flex justify-content-end py-6 px-9">
        <button
        mat-raised-button  mat-dialog-close
          type="button"
          style="margin-right:2rem ;"
          class="btn btn-primary"
        >
          Annuler
        </button>
        <button
        (click)="updatedevis()"
          type="button"
          class="btn btn-primary"
        >
        Sauvegarder
        </button>

      </div>
    